pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
the_balls={
 {x=10,y=10,s=3},
 {x=30,y=30,s=1}
}

function _update()
 if #the_balls<8 then
  add(
   the_balls,
   {x=rnd(64),
    y=64,
    s=rnd(5)+1})
 end
 for b in all(the_balls) do
  b.y-=b.s
  if b.y<0 then
   del(the_balls,b)
  end
 end
end

function balls(x,y)
 local v=0
 for b in all(the_balls) do
  local dx=x-b.x
  local dy=y-b.y
  v+=10/(dx*dx+dy*dy)
 end
 return mid(v,0,1)
end

ramp={0,1,2,4,9,10,7}

function _draw()
 cls()
 for y=0,64 do 
  for x=0,64 do
   local v=balls(x,y)
   local c=ramp[flr(v*#ramp)]
   rect(x*2,y*2,1+x*2,1+y*2,c)
  end
 end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
