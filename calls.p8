pico-8 cartridge // http://www.pico-8.com
version 22
__lua__
cl=32

function lerp(a,b,t)
 return a+(b-a)*t
end

function gen_call(i)
 local base=0x3200+(68*i)
 
 cl=rnd(16)+8
 for i=0,63,1 do
  poke(0x3200+i,0)
 end
   
 local old=rnd(8)+56
 for i=0,cl,4 do
  local new=rnd(8)+56
  for j=0,3 do
   local addr=base+(i+j)*2
   local pitch=lerp(old,new,j/4)
   poke2(addr, 0x0a00|pitch)
  end
  old=new
 end
end

play=false
delay=0 pd=0

function _update()
 if btnp(üÖæÔ∏è) then
  play=not play
 end
 if play then
  if stat(20)==-1 then
   delay-=1
   if delay<0 then
    gen_call(0)   
    sfx(0)
    delay=rnd(24)+2
    pd=delay
   end
  end
 end
end

function _draw()
 cls(0)
 print(stat(20).." "..flr(pd))
 for i=0,32,1 do
  local pitch=peek(0x3200+(i*2))
  local x=(i*3)+2
  local c=14
  if i==stat(20) then
   c=7
  end
  line(x,96,x,96-pitch,c)
 end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100003305034050350503405032050300502c05028050230501d0501905016050140501305012050120501305014050180501e050250502b050300503305034050320502f0502805022050210502305024050
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000800001e00000000370503c0503c00000000000000000000000380503c05000000000003805035050380503505038050350500000000000000003800013000380503c050000000000000000000000000000000
000900003c050000003c05000000000000000000000000003c0503205032000320003205000000000000000032050000000000000000000000000000000000000000000000000000000000000000000000000000
00080000300503c0500000000000000003005030050300503c0502c0003c00030000230003c000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00100720070500a0500c0500f050110501605016050180501b0501b0501d050160501605016050180501b0501f0501f05022050220502705029050270502705027050220501f0502205022050220502405027050
